# jupyterlab-paperspace-model-cockpit

`jupyterlab-paperspace-model-cockpit` は、  
**Paperspace 上の JupyterLab + ComfyUI 環境向けに設計された、宣言的モデル管理用の JupyterLab 拡張機能**です。

Paperspace の「環境が定期的に消える」という前提を正面から受け止め、  
**状態を持たず、再現性を最優先**にしたモデル管理を提供します。

---

## 背景と目的

Paperspace 環境では、次のような運用が一般的です。

- 環境は一定時間で破棄される
- モデルファイル（checkpoint / LoRA / VAE など）は毎回入れ直しになる
- どのモデルを使うかは、ほぼ毎回決まっている

このとき問題になるのが、

- 何を入れるかを毎回手動で思い出す必要がある
- 中途半端なダウンロードや状態管理が混乱を生む
- UI を開かないと環境が整わない

この拡張は、それらを次の考え方で解決します。

- **モデル構成は JSON で宣言する**
- **インストール状態はファイルの有無だけで判断する**
- **必要なものだけを自動でダウンロードする**
- **UI を開かなくても環境が完成する**

---

## 特徴

### 宣言的モデル管理
- `models.json` に「どのモデルを使うか」を定義
- checkpoint / LoRA / VAE などをまとめて扱える
- 状態DB（SQLiteなど）は使用しない

### バンドルによる一括管理
- 複数モデルを **bundle** として定義
- よく使う構成をワンクリック、または自動でインストール

### 起動時の自動インストール
- bundle に `auto_install` を指定可能
- JupyterLab 起動時に、必要なモデルが自動で揃う
- UI を開く必要はない

### 安全で単純なダウンロード設計
- ダウンロードは **常に直列**
- 失敗・キャンセル時はファイルを削除
- 中途半端な状態を残さない

---

## しないこと

この拡張は、あえて次のことをしません。

- 並列ダウンロード
- インストール状態の永続管理
- 複雑な履歴・ログ管理
- 自動更新や差分アップデート
- モデルの意味的な互換性チェック

Paperspace 環境では「壊れないこと」「再構築できること」を最優先します。

---

## 想定ユースケース

- Paperspace + JupyterLab + ComfyUI を日常的に使う
- 毎回ほぼ同じモデルセットを使う
- 環境起動後、何も考えずに作業を始めたい
- モデル管理に余計な状態やDBを持ち込みたくない

---

## 基本コンセプト

- **models.json = 宣言**
- **ファイルの存在 = 状態**
- **bundle = モデルの集合**
- **失敗したら消してやり直す**

この拡張は「正しく忘れる」ことを前提に作られています。

---

## アーキテクチャ概要

- JupyterLab 拡張として動作
- フロントエンドとサーバーサイドを分離
- モデルのダウンロード・管理はサーバー側で実行
- UI はあくまで操作用の補助

ディレクトリ構成や技術スタックは、  
一般的な JupyterLab 拡張の構成に従います。

---

## ステータス

このプロジェクトは現在開発中です。  
設計は Paperspace 環境での実運用を前提に固められています。
